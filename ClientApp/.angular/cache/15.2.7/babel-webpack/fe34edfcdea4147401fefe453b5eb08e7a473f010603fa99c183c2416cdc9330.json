{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/url-service/url.service\";\nimport * as i2 from \"src/app/services/auth-service/auth.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = function (a0) {\n  return {\n    \"available\": a0\n  };\n};\nfunction ListComponent_table_4_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 8)(1, \"td\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 6);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 6);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 9);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_4_tr_13_Template_td_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const url_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.delete(url_r2.urlId, url_r2.userId));\n    });\n    i0.ɵɵtext(12, \"\\u00D7\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const url_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.urlId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.originalUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.shortenedUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.createdAt);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.userId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, ctx_r1.userId == url_r2.userId || ctx_r1.isAdmin));\n  }\n}\nfunction ListComponent_table_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 4)(1, \"tr\", 5)(2, \"td\", 6);\n    i0.ɵɵtext(3, \"Url Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\", 6);\n    i0.ɵɵtext(5, \"Original\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 6);\n    i0.ɵɵtext(7, \"Shortened\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 6);\n    i0.ɵɵtext(9, \"Created At\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 6);\n    i0.ɵɵtext(11, \"User Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"td\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, ListComponent_table_4_tr_13_Template, 13, 8, \"tr\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.urls);\n  }\n}\nexport class ListComponent {\n  constructor(urlService, authService) {\n    this.urlService = urlService;\n    this.authService = authService;\n    this.urls = [];\n    this.userId = 0;\n    this.isAdmin = false;\n    this.isAuthenticated = false;\n    this.authService.userId.subscribe(userId => this.userId = userId);\n    this.authService.isAdmin.subscribe(isAdmin => this.isAdmin = isAdmin);\n    this.authService.isAuthenticated.subscribe(isAuthenticated => this.isAuthenticated = isAuthenticated);\n  }\n  delete(urlId, urlUserId) {\n    if (this.userId == urlUserId || this.isAdmin) {\n      this.urlService.deleteUrl(urlId, this.userId).subscribe(ok => this.urlService.urls().subscribe(urls => this.urls = urls));\n    }\n  }\n  ngOnInit() {\n    this.urlService.urls().subscribe(urls => this.urls = urls, error => console.log(error));\n    this.authService.userIdQuery().subscribe(userId => this.authService.userId.next(userId));\n  }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.UrlService), i0.ɵɵdirectiveInject(i2.AuthService));\n};\nListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListComponent,\n  selectors: [[\"app-list\"]],\n  decls: 5,\n  vars: 1,\n  consts: [[1, \"list-wrapper\"], [1, \"header\"], [1, \"list-container\"], [\"class\", \"table\", 4, \"ngIf\"], [1, \"table\"], [1, \"table-row\"], [1, \"table-cell\"], [\"cla\", \"\", \"class\", \"table-cell\", \"ss\", \"table-row\", 4, \"ngFor\", \"ngForOf\"], [\"cla\", \"\", \"ss\", \"table-row\", 1, \"table-cell\"], [1, \"table-cell\", \"cross\", 3, \"ngClass\", \"click\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2, \"List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, ListComponent_table_4_Template, 14, 1, \"table\", 3);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.urls.length != 0);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf],\n  styles: [\".list-wrapper[_ngcontent-%COMP%] {\\r\\n    background-color: var(--primary-color);\\r\\n    border: 1px solid black;\\r\\n    box-sizing: border-box;\\r\\n    box-shadow: 0 0 5px black;\\r\\n    \\r\\n}\\r\\n.header[_ngcontent-%COMP%] {\\r\\n    padding: 20px;\\r\\n    box-sizing: border-box;\\r\\n    background-color: var(--dark-color);\\r\\n    font-size: var(--title-font-size);\\r\\n    color: var(--font-color);\\r\\n    border-bottom: 1px solid black;\\r\\n}\\r\\n.table[_ngcontent-%COMP%] {\\r\\n    padding: 50px;\\r\\n    max-height: 500px;\\r\\n    box-sizing: border-box;\\r\\n    color: var(--font-color);\\r\\n    margin: 0;\\r\\n    overflow-y: auto;\\r\\n}\\r\\n.table-row[_ngcontent-%COMP%] {\\r\\n    border-bottom: 1px solid black;\\r\\n}\\r\\n.table-cell[_ngcontent-%COMP%] {\\r\\n    padding: 20px;\\r\\n    box-sizing: border-box;\\r\\n    text-align: center;\\r\\n}\\r\\n.cross[_ngcontent-%COMP%] {\\r\\n    font-size: var(--cross-size);\\r\\n    -webkit-user-select: none;\\r\\n            user-select: none;\\r\\n    opacity: 0.5;\\r\\n    cursor: default;\\r\\n}\\r\\n.available[_ngcontent-%COMP%] {\\r\\n    cursor: pointer;\\r\\n    opacity: 1;\\r\\n    transition: var(--main-transition);\\r\\n}\\r\\n.available[_ngcontent-%COMP%]:hover {\\r\\n    scale: 1.3;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9saXN0L2xpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHNDQUFzQztJQUN0Qyx1QkFBdUI7SUFDdkIsc0JBQXNCO0lBQ3RCLHlCQUF5Qjs7QUFFN0I7QUFDQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsbUNBQW1DO0lBQ25DLGlDQUFpQztJQUNqQyx3QkFBd0I7SUFDeEIsOEJBQThCO0FBQ2xDO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLHNCQUFzQjtJQUN0Qix3QkFBd0I7SUFDeEIsU0FBUztJQUNULGdCQUFnQjtBQUNwQjtBQUNBO0lBQ0ksOEJBQThCO0FBQ2xDO0FBQ0E7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksNEJBQTRCO0lBQzVCLHlCQUFpQjtZQUFqQixpQkFBaUI7SUFDakIsWUFBWTtJQUNaLGVBQWU7QUFDbkI7QUFDQTtJQUNJLGVBQWU7SUFDZixVQUFVO0lBQ1Ysa0NBQWtDO0FBQ3RDO0FBQ0E7SUFDSSxVQUFVO0FBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyIubGlzdC13cmFwcGVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDVweCBibGFjaztcclxuICAgIFxyXG59XHJcbi5oZWFkZXIge1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrLWNvbG9yKTtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0tdGl0bGUtZm9udC1zaXplKTtcclxuICAgIGNvbG9yOiB2YXIoLS1mb250LWNvbG9yKTtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBibGFjaztcclxufVxyXG4udGFibGUge1xyXG4gICAgcGFkZGluZzogNTBweDtcclxuICAgIG1heC1oZWlnaHQ6IDUwMHB4O1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIGNvbG9yOiB2YXIoLS1mb250LWNvbG9yKTtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbn1cclxuLnRhYmxlLXJvdyB7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7XHJcbn1cclxuLnRhYmxlLWNlbGwge1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuLmNyb3NzIHtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0tY3Jvc3Mtc2l6ZSk7XHJcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgIG9wYWNpdHk6IDAuNTtcclxuICAgIGN1cnNvcjogZGVmYXVsdDtcclxufVxyXG4uYXZhaWxhYmxlIHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1tYWluLXRyYW5zaXRpb24pO1xyXG59XHJcbi5hdmFpbGFibGU6aG92ZXIge1xyXG4gICAgc2NhbGU6IDEuMztcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;IAYYA,6BAAkE;IACvCA,YAAa;IAAAA,iBAAK;IACzCA,6BAAuB;IAAAA,YAAmB;IAAAA,iBAAK;IAC/CA,6BAAuB;IAAAA,YAAoB;IAAAA,iBAAK;IAChDA,6BAAuB;IAAAA,YAAiB;IAAAA,iBAAK;IAC7CA,6BAAuB;IAAAA,aAAc;IAAAA,iBAAK;IAC1CA,8BAAiI;IAApGA;MAAA;MAAA;MAAA;MAAA,OAASA,yDAA6B;IAAA,EAAC;IAA6DA,uBAAC;IAAAA,iBAAK;;;;;IALhHA,eAAa;IAAbA,kCAAa;IACbA,eAAmB;IAAnBA,wCAAmB;IACnBA,eAAoB;IAApBA,yCAAoB;IACpBA,eAAiB;IAAjBA,sCAAiB;IACjBA,eAAc;IAAdA,mCAAc;IACgCA,eAA2D;IAA3DA,sGAA2D;;;;;IAfxIA,gCAA8C;IAEfA,sBAAM;IAAAA,iBAAK;IAClCA,6BAAuB;IAAAA,wBAAQ;IAAAA,iBAAK;IACpCA,6BAAuB;IAAAA,yBAAS;IAAAA,iBAAK;IACrCA,6BAAuB;IAAAA,0BAAU;IAAAA,iBAAK;IACtCA,8BAAuB;IAAAA,wBAAO;IAAAA,iBAAK;IACnCA,yBAA4B;IAChCA,iBAAK;IACLA,uEAOK;IACTA,iBAAQ;;;;IARqDA,gBAAO;IAAPA,qCAAO;;;ACF5E,OAAM,MAAOC,aAAa;EAOxBC,YAAoBC,UAAsB,EAAUC,WAAwB;IAAxD,eAAU,GAAVD,UAAU;IAAsB,gBAAW,GAAXC,WAAW;IAL/D,SAAI,GAAkB,EAAE;IACxB,WAAM,GAAW,CAAC;IAClB,YAAO,GAAY,KAAK;IACxB,oBAAe,GAAY,KAAK;IAG9B,IAAI,CAACA,WAAW,CAACC,MAAM,CAACC,SAAS,CAC/BD,MAAM,IAAI,IAAI,CAACA,MAAM,GAAGA,MAAM,CAC/B;IAED,IAAI,CAACD,WAAW,CAACG,OAAO,CAACD,SAAS,CAChCC,OAAO,IAAI,IAAI,CAACA,OAAO,GAAGA,OAAO,CAClC;IAED,IAAI,CAACH,WAAW,CAACI,eAAe,CAACF,SAAS,CACxCE,eAAe,IAAI,IAAI,CAACA,eAAe,GAAGA,eAAe,CAC1D;EACH;EAEAC,MAAM,CAACC,KAAa,EAAEC,SAAiB;IACrC,IAAI,IAAI,CAACN,MAAM,IAAIM,SAAS,IAAI,IAAI,CAACJ,OAAO,EAAE;MAC5C,IAAI,CAACJ,UAAU,CAACS,SAAS,CAACF,KAAK,EAAE,IAAI,CAACL,MAAM,CAAC,CAACC,SAAS,CACrDO,EAAE,IAAI,IAAI,CAACV,UAAU,CAACW,IAAI,EAAE,CAACR,SAAS,CACpCQ,IAAI,IAAI,IAAI,CAACA,IAAI,GAAGA,IAAqB,CAC1C,CACF;;EAEL;EAEAC,QAAQ;IACN,IAAI,CAACZ,UAAU,CAACW,IAAI,EAAE,CAACR,SAAS,CAC9BQ,IAAI,IAAI,IAAI,CAACA,IAAI,GAAGA,IAAqB,EACzCE,KAAK,IAAIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAC5B;IAED,IAAI,CAACZ,WAAW,CAACe,WAAW,EAAE,CAACb,SAAS,CACtCD,MAAM,IAAI,IAAI,CAACD,WAAW,CAACC,MAAM,CAACe,IAAI,CAACf,MAAgB,CAAC,CACzD;EACH;;AAxCWJ,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAoB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDV1BzB,8BAA0B;MACFA,oBAAI;MAAAA,iBAAM;MAC9BA,8BAA4B;MACxBA,mEAiBQ;MACZA,iBAAM;;;MAlBoBA,eAAsB;MAAtBA,2CAAsB","names":["i0","ListComponent","constructor","urlService","authService","userId","subscribe","isAdmin","isAuthenticated","delete","urlId","urlUserId","deleteUrl","ok","urls","ngOnInit","error","console","log","userIdQuery","next","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\LEGA-USER\\source\\repos\\InforceTask\\ClientApp\\src\\app\\components\\list\\list.component.html","C:\\Users\\LEGA-USER\\source\\repos\\InforceTask\\ClientApp\\src\\app\\components\\list\\list.component.ts"],"sourcesContent":["<div class=\"list-wrapper\">\n    <div class=\"header\">List</div>\n    <div class=\"list-container\">\n        <table class=\"table\" *ngIf=\"urls.length != 0\">\n            <tr class=\"table-row\">\n                <td class=\"table-cell\">Url Id</td>\n                <td class=\"table-cell\">Original</td>\n                <td class=\"table-cell\">Shortened</td>\n                <td class=\"table-cell\">Created At</td>\n                <td class=\"table-cell\">User Id</td>\n                <td class=\"table-cell\"></td>\n            </tr>\n            <tr cla class=\"table-cell\"ss=\"table-row\" *ngFor=\"let url of urls\">\n                <td class=\"table-cell\">{{url.urlId}}</td>\n                <td class=\"table-cell\">{{url.originalUrl}}</td>\n                <td class=\"table-cell\">{{url.shortenedUrl}}</td>\n                <td class=\"table-cell\">{{url.createdAt}}</td>\n                <td class=\"table-cell\">{{url.userId}}</td>\n                <td class=\"table-cell cross\" (click)=\"delete(url.urlId, url.userId)\" [ngClass]=\"{'available': userId == url.userId || isAdmin }\">×</td>\n            </tr>\n        </table>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { UrlListItem } from 'src/app/data/urlListItem';\nimport { AuthService } from 'src/app/services/auth-service/auth.service';\nimport { UrlService } from 'src/app/services/url-service/url.service';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.css']\n})\nexport class ListComponent implements OnInit {\n  \n  urls: UrlListItem[] = [];\n  userId: number = 0;\n  isAdmin: boolean = false;\n  isAuthenticated: boolean = false;\n  \n  constructor(private urlService: UrlService, private authService: AuthService) {\n    this.authService.userId.subscribe(\n      userId => this.userId = userId\n    );\n\n    this.authService.isAdmin.subscribe(\n      isAdmin => this.isAdmin = isAdmin\n    );\n\n    this.authService.isAuthenticated.subscribe(\n      isAuthenticated => this.isAuthenticated = isAuthenticated\n    );\n  }\n\n  delete(urlId: number, urlUserId: number) {\n    if (this.userId == urlUserId || this.isAdmin) {\n      this.urlService.deleteUrl(urlId, this.userId).subscribe(\n        ok => this.urlService.urls().subscribe(\n          urls => this.urls = urls as UrlListItem[]\n        )\n      );\n    }\n  }\n\n  ngOnInit(): void {\n    this.urlService.urls().subscribe(\n      urls => this.urls = urls as UrlListItem[],\n      error => console.log(error)\n    );\n\n    this.authService.userIdQuery().subscribe(\n      userId => this.authService.userId.next(userId as number)\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}